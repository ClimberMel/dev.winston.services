"use strict";(self.webpackChunkwinston=self.webpackChunkwinston||[]).push([[4583],{24583:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var s=n(65043),o=n(35721),r=n(30681),a=n(12110),i=n(26494),l=n(85865),c=n(68903),d=n(53404),u=n(29840),x=n(76371),h=n(70579);function g(e){let{messages:t}=e;const n=s.useRef(null);return s.useEffect((()=>{n.current&&(n.current.scrollTop=n.current.scrollHeight)}),[t]),(0,h.jsx)(o.A,{ref:n,style:{maxHeight:"400px",overflow:"auto"},children:t.map(((e,t)=>(0,h.jsx)(r.Ay,{children:(0,h.jsx)(a.A,{variant:"outlined",style:{width:"100%"},children:(0,h.jsxs)(i.A,{children:[(0,h.jsxs)(l.A,{variant:"body2",color:"textSecondary",component:"p",children:[(0,h.jsx)("strong",{children:"To:"})," ",e.to]}),(0,h.jsxs)(l.A,{variant:"body2",color:"textSecondary",component:"p",children:[(0,h.jsx)("strong",{children:"Message:"})," ",e.message]}),(0,h.jsxs)(l.A,{variant:"body2",color:"textSecondary",component:"p",children:[(0,h.jsx)("strong",{children:"Date:"})," ",e.date]})]})})},t)))})}function m(){const{connection:e}=(0,x.Ay)(),[t,n]=s.useState([]),[o,r]=s.useState(""),[a,i]=s.useState("");return s.useEffect((()=>{e.onmessage=async t=>{try{const n=JSON.parse(await t.data.text(),!1,2);((e,t)=>{t.SIG&&""!==t.SIG&&t.OP_CODE&&(t.OP_CODE,console.log(e))})(e,n)}catch(n){console.error(n)}}})),(0,h.jsx)("div",{children:(0,h.jsxs)(c.Ay,{container:!0,spacing:1,children:[(0,h.jsxs)(c.Ay,{item:!0,xs:12,children:[(0,h.jsx)("h2",{children:"Message Log"}),(0,h.jsx)(g,{messages:t})]}),(0,h.jsxs)(c.Ay,{item:!0,xs:12,children:[(0,h.jsx)("h2",{children:"Send Message"}),(0,h.jsxs)("form",{onSubmit:function(s){s.preventDefault();const l={to:o,message:a,date:(new Date).toISOString().split("T")[0]};e.send(JSON.stringify({OP_CODE:"MESSAGE",SIG:"No_Sig",from:"anonymous",to:o,data:l})),n([...t,l]),r(""),i("")},style:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,h.jsx)(u.A,{id:"recipient",name:"recipient",label:"Recipient",variant:"outlined",fullWidth:!0,required:!0,value:o,onChange:e=>r(e.target.value),autoComplete:"off"}),(0,h.jsx)(u.A,{id:"message",name:"message",label:"Message",variant:"outlined",multiline:!0,rows:4,fullWidth:!0,required:!0,value:a,onChange:e=>i(e.target.value),autoComplete:"off"}),(0,h.jsx)(d.A,{type:"submit",variant:"contained",color:"primary",children:"Send"})]})]})]})})}}}]);
//# sourceMappingURL=4583.f629f976.chunk.js.map