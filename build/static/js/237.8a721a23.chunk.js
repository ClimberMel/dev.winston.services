"use strict";(self.webpackChunkwinston=self.webpackChunkwinston||[]).push([[237],{1888:(e,t,l)=>{l.d(t,{A:()=>g,h:()=>A});var n,s,i,r,o,c,a,d,x,h,p,u=l(65043);function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e},m.apply(this,arguments)}function j(e,t){let{title:l,titleId:j,...A}=e;return u.createElement("svg",m({width:162,height:172,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":j},A),l?u.createElement("title",{id:j},l):null,n||(n=u.createElement("path",{d:"M101.662 78.84v88.618a4.548 4.548 0 0 1-4.55 4.542H4.557a4.301 4.301 0 0 1-1.468-.252A4.54 4.54 0 0 1 0 167.458V78.841a4.545 4.545 0 0 1 4.55-4.543h92.555c1.238 0 2.354.49 3.182 1.296a4.498 4.498 0 0 1 1.375 3.247z",fill:"#fff"})),s||(s=u.createElement("path",{d:"M94.643 81.757v79.776c0 .007-.007.007-.007.007H6.185V81.757h88.458z",fill:"#4C3B9C"})),i||(i=u.createElement("path",{d:"M94.643 107.703v50.445c0 2.7-1.821 4.334-4.521 4.334H10.706c-2.7 0-4.521.13-4.521-2.57v-35.759c5.838 2.621 17.97 6.559 31 1.433 17.574-6.919 30.835-19.77 57.458-17.883z",fill:"#271D5A"})),r||(r=u.createElement("path",{d:"M34.031 105.348a6.09 6.09 0 1 0 0-12.181 6.09 6.09 0 0 0 0 12.181z",fill:"#FFD215"})),o||(o=u.createElement("path",{d:"M4.442 102.498s1.325-3.585 4.63-3.21c3.304.374 3.398 6.075 3.398 6.075s.619-1.353 2.527-1.166c1.907.187 2.267 2.326 2.267 2.326s4.853-2.319 6.156.986c.396 1.001-.82 1.598-2.794 1.929-5.32.907-16.184-.05-16.184-.05v-6.89zM161.626 84.758 76.868 97.206 71.31 59.337l-1.426-9.705-5.464-37.17L149.164 0l12.462 84.758z",fill:"#fff"})),c||(c=u.createElement("path",{d:"m152.778 80.302-69.33 10.187-4.852-33.016-5.342-36.321 69.337-10.187 1.44 9.798 8.747 59.539z",fill:"#4C3B9C"})),a||(a=u.createElement("path",{d:"m152.778 80.302-69.33 10.187-4.852-33.016c2.67-6.27 7.437-13.679 14.989-14.003 13.211-.583 12.908 18.344 23.693 16.019 10.029-2.167 13.707-32.837 26.753-38.718l8.747 59.531z",fill:"#271D5A"})),d||(d=u.createElement("path",{d:"M112.108 38.358a4.954 4.954 0 1 0 0-9.907 4.954 4.954 0 0 0 0 9.907z",fill:"#FFD215"})),x||(x=u.createElement("path",{d:"M144.901 16.285s-2.822-4.434-5.378-2.555-1.209 5.378-1.209 5.378-3.766-2.283-6.048 0c-2.282 2.282-.273 7.17-.273 7.17s-4.932-.194-4.572 2.174c.403 2.62 18.553-1.879 18.553-1.879l-1.073-10.288z",fill:"#fff"})),h||(h=u.createElement("path",{opacity:.22,d:"m149.164 0-1.591 2.145h-.008l-80.301 12.21 5.19 35.277 1.419 9.705 5.104 34.766-2.11 3.103-5.557-37.869-1.426-9.705-5.464-37.17L149.164 0z",fill:"url(#a)"})),p||(p=u.createElement("defs",null,u.createElement("linearGradient",{id:"a",x1:9.277,y1:-9.075,x2:150.476,y2:69.43,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{stopColor:"#4B596D",stopOpacity:0}),u.createElement("stop",{offset:1,stopColor:"#B9EFFF"})))))}const A=u.forwardRef(j),g=l.p+"static/media/upload_image.75b748fb008c3d6572be35a22a9f7312.svg"},55231:(e,t,l)=>{l.d(t,{A:()=>a});l(65043);var n=l(83243),s=l(68903),i=l(43845),r=l(29840),o=l(63516),c=l(70579);const a=e=>{let{name:t,options:l,label:a,placeholder:d}=e;const[x,h]=(0,o.Mt)(t),{setFieldValue:p}=(0,o.j7)(),u={...x,onChange:(e,l)=>{p(t,l)}},m={name:x.name};return h&&h.touched&&h.error&&(m.error=!0,m.helperText=h.error),(0,c.jsx)(n.A,{multiple:!0,options:l,freeSolo:!0,...u,renderTags:(e,t)=>(0,c.jsx)(s.Ay,{width:"100%",children:e.map(((e,l)=>(0,c.jsx)(i.A,{variant:"filled",label:e,...t({index:l})},e)))}),renderInput:e=>(0,c.jsx)(r.A,{fullWidth:!0,...m,...e,variant:"outlined",label:a,placeholder:d})})}},92236:(e,t,l)=>{l.d(t,{A:()=>h});l(65043);var n=l(91794),s=l(17392),i=l(68903),r=l(12110),o=l(85865),c=l(81673),a=l(63516),d=l(1888),x=l(70579);const h=function(e){const[t,,l]=(0,a.Mt)(e.name);return t.value?(0,x.jsxs)("div",{style:{position:"relative"},children:[(0,x.jsx)("img",{src:t.value,height:e.height,width:"100%",style:{borderRadius:"20px",objectFit:"cover"}}),(0,x.jsx)(s.A,{style:{position:"absolute",top:"20px",right:"25px",borderRadius:"20px"},sx:{fontSize:30,color:"red"},...t,children:(0,x.jsx)(n.A,{})})]}):(0,x.jsxs)(i.Ay,{height:e.height,children:[(0,x.jsxs)(r.A,{className:"dragBox",elevation:0,sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",p:3,textAlign:"center",border:"2px dashed #6D6691",cursor:"pointer",position:"relative"},children:[(0,x.jsx)(i.Ay,{children:(0,x.jsx)(d.h,{})}),(0,x.jsx)(o.A,{sx:{fontSize:"18px",mt:2.5,mb:1},textAlign:"center",children:e.title}),(0,x.jsx)(o.A,{variant:"subtitle2",textAlign:"center",sx:{color:"#B3AFC8"},children:e.subtitle}),(0,x.jsx)("input",{accept:"image/*",type:"file",className:"imageDragDrop",onChange:e=>{l.setValue(URL.createObjectURL(e.target.files[0]))},style:{position:"absolute",height:"100%",width:"100%",opacity:0,top:0,left:0}})]}),(0,x.jsx)(c.A,{error:!0,children:(0,x.jsx)(a.Kw,{name:e.name})})]})}},20237:(e,t,l)=>{l.r(t),l.d(t,{default:()=>T});var n=l(65043),s=l(8070),i=l(68903),r=l(85865),o=l(46946),c=l(53404),a=l(12110),d=l(63516),x=l(21305),h=l(67537),p=l(80077),u=l(86971),m=l(73033),j=l(55231),A=l(29840),g=l(70579);const f=e=>{let{name:t,...l}=e;const[n,s]=(0,d.Mt)(t);return(0,g.jsx)(A.A,{name:t,fullWidth:!0,variant:"outlined",autoComplete:"off",...n,error:s.touched&&Boolean(s.error),helperText:s.touched&&s.error,...l})};var C=l(92236),v=l(33868),y=l(26805),w=l.n(y),b=l(99409),I=l(18584),k=l(74211),E=l(51387),D=l(36910),z=l(17392),S=l(77739),q=l(35964),R=l(42734),F=l(91894),M=l(83560),L=l(44633),P=l(81012),U=l(77233),B=l(74605),Y=l(51962);function O(e){let{lesson:t,lectureId:l,lessonIndex:s,lectureIndex:o,lessonLength:c}=e;console.log("lesson card",t,l,s,o,c);const a=(0,u.Zp)(),d=(0,p.wA)(),[x,h]=n.useState({lessonIndex:-1,lectureIndex:-1,name:""}),m=(0,p.d4)(v.YR),j=m[o];return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(i.Ay,{display:"flex",alignItems:"center",justifyContent:"space-between",pl:3,children:[(0,g.jsxs)(i.Ay,{display:"flex",alignItems:"center",gap:1,children:[(0,g.jsx)(z.A,{children:(0,g.jsx)(b.A,{sx:{color:"#4C3B9C"}})}),x.lessonIndex==s&&x.lectureIndex===o?(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(A.A,{inputProps:{style:{fontSize:14}},sx:{width:"auto"},variant:"standard",value:x.name,onChange:e=>h({...x,name:e.target.value})})}):(0,g.jsx)(r.A,{variant:"subtitle2",children:t.name}),x.lessonIndex==s&&x.lectureIndex===o?(0,g.jsx)(S.A,{placement:"top",arrow:!0,title:"Update lesson name",children:(0,g.jsx)(z.A,{onClick:()=>{const e={...t,name:x.name},l=[...j.lesson];l[s]=e;const n={...j,lesson:l},i=[...m];i[o]=n,d((0,v.v0)(i)),h({...x,lessonIndex:-1,lectureIndex:-1})},children:(0,g.jsx)(I.A,{sx:{color:"#C4C4C4"}})})}):(0,g.jsx)(S.A,{placement:"top",arrow:!0,title:"Edit lesson name",children:(0,g.jsx)(z.A,{onClick:()=>{h({name:t.name,lectureIndex:o,lessonIndex:s})},children:(0,g.jsx)(k.A,{sx:{color:"#C4C4C4",width:"18px",height:"18px"}})})})]}),(0,g.jsxs)(i.Ay,{display:"flex",alignItems:"center",children:[(0,g.jsx)(S.A,{placement:"top",arrow:!0,title:"Count lesson for course completion",children:(0,g.jsx)(B.A,{control:(0,g.jsx)(Y.A,{checked:t.isRequired,sx:{"& .MuiSvgIcon-root":{fontSize:18,color:"#FFD215"}},onChange:e=>{const{checked:l}=e.target,n={...t,isRequired:l},i=[...j.lesson];i[s]=n;const r={...j,lesson:i},c=[...m];c[o]=r,d((0,v.v0)(c))}}),label:"Required"})}),(0,g.jsx)(S.A,{placement:"top",arrow:!0,title:"Edit lesson",children:(0,g.jsx)(z.A,{onClick:()=>{a("/academy/edit-lesson"),d((0,v.Pq)(t))},children:(0,g.jsx)(M.A,{sx:{color:"#C4C4C4",width:"18px",height:"18px"}})})}),(0,g.jsx)(S.A,{placement:"top",arrow:!0,title:"Copy lesson",children:(0,g.jsx)(z.A,{onClick:()=>{const e={...t,id:(0,F.u)(),name:"Copy of "+t.name},l=[...j.lesson];l.splice(s+1,0,e);const n={...j,lesson:l},i=[...m];i[o]=n,d((0,v.v0)(i))},children:(0,g.jsx)(D.A,{sx:{color:"#C4C4C4",width:"18px",height:"18px"}})})}),(0,g.jsx)(S.A,{placement:"top",arrow:!0,title:"Lesson link",children:(0,g.jsx)(z.A,{children:(0,g.jsx)(L.A,{sx:{color:"#C4C4C4",width:"18px",height:"18px"}})})}),c>1?(0,g.jsx)(S.A,{placement:"top",arrow:!0,title:"Delete lesson",children:(0,g.jsx)(z.A,{onClick:()=>{const e=[...j.lesson];e.splice(s,1);const t={...j,lesson:e},l=[...m];l[o]=t,d((0,v.v0)(l))},children:(0,g.jsx)(E.A,{sx:{color:"#C4C4C4",width:"18px",height:"18px"}})})}):null,(0,g.jsx)(S.A,{placement:"top",arrow:!0,title:"Add lesson below",children:(0,g.jsx)(z.A,{onClick:()=>{const e={id:(0,F.u)(),name:"Untitled lesson",isRequired:!1,content:[]},t=[...j.lesson];t.splice(s+1,0,e);const l={...j,lesson:t},n=[...m];n[o]=l,d((0,v.v0)(n))},children:(0,g.jsx)(P.A,{sx:{color:"#C4C4C4",width:"18px",height:"18px"}})})}),(0,g.jsx)(S.A,{placement:"top",arrow:!0,title:"Add lecture below",children:(0,g.jsx)(z.A,{onClick:()=>{const e=[...m],t={...j,id:(0,F.u)(),name:"Untitled lecture",lesson:[{id:(0,F.u)(),name:"Untitled lesson",isRequired:!1,content:[]}]};e.splice(o+1,0,t),d((0,v.v0)(e))},children:(0,g.jsx)(U.A,{sx:{color:"#C4C4C4",width:"18px",height:"18px"}})})})]})]},t.name+s)})}function V(e){let{lecture:t,lectureIndex:l,lectureLength:s,moveCard:o,id:c}=e;const a=(0,p.wA)(),d=(0,p.d4)(v.YR),[x,h]=n.useState({id:-1,name:""}),u=n.useRef(null),[{handlerId:m},j]=(0,q.H)({accept:"card",collect:e=>({handlerId:e.getHandlerId()}),hover(e,t){var n;if(!u.current)return;const s=e.lectureIndex,i=l;if(s===i)return;const r=null===(n=u.current)||void 0===n?void 0:n.getBoundingClientRect(),c=(r.bottom-r.top)/2,a=t.getClientOffset().y-r.top;s<i&&a<c||s>i&&a>c||(o(s,i),e.lectureIndex=i)}}),[{isDragging:f},C,y]=(0,R.i)({type:"card",item:()=>({id:c,lectureIndex:l}),collect:e=>({isDragging:e.isDragging()})}),w=f?"0":"1";y(j(u));return(0,g.jsx)("div",{ref:u,style:{opacity:w},"data-handler-id":m,children:(0,g.jsxs)(i.Ay,{display:"flex",flexDirection:"column",gap:1,children:[(0,g.jsxs)(i.Ay,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,g.jsxs)(i.Ay,{display:"flex",alignItems:"center",gap:1,children:[(0,g.jsx)(z.A,{ref:C,sx:{cursor:"move"},children:(0,g.jsx)(b.A,{sx:{color:"#4C3B9C"}})}),x.id===c?(0,g.jsx)(A.A,{inputProps:{style:{fontSize:16}},sx:{width:"auto"},variant:"standard",value:x.name,onChange:e=>{h({...x,name:e.target.value})}}):(0,g.jsx)(r.A,{variant:"subtitle1",children:t.name}),x.id===c?(0,g.jsx)(S.A,{placement:"top",arrow:!0,title:"Update lecture name",children:(0,g.jsx)(z.A,{onClick:()=>{let e=[...d];const t={...e.find((e=>e.id===c)),name:x.name};e=e.map((e=>e.id===c?t:e)),a((0,v.v0)(e)),h({id:-1,name:""})},children:(0,g.jsx)(I.A,{sx:{color:"#C4C4C4"}})})}):(0,g.jsx)(S.A,{placement:"top",arrow:!0,title:"Edit lecture name",children:(0,g.jsx)(z.A,{onClick:()=>{h({...t,id:t.id,name:t.name})},children:(0,g.jsx)(k.A,{sx:{color:"#C4C4C4",height:"20px",width:"20px"}})})})]}),(0,g.jsxs)(i.Ay,{children:[s>1?(0,g.jsx)(S.A,{placement:"top",arrow:!0,title:"Delete lecture",children:(0,g.jsx)(z.A,{onClick:()=>{console.log("delete lecture",t);const e=[...d].filter((e=>e.id!==t.id));console.log("lecturesUpdated",e),a((0,v.v0)(e))},children:(0,g.jsx)(E.A,{sx:{color:"#C4C4C4",height:"20px",width:"20px"}})})}):null,(0,g.jsx)(S.A,{placement:"top",arrow:!0,title:"Copy lecture",children:(0,g.jsx)(z.A,{onClick:()=>{const e=[...d],n={...t,id:(0,F.u)()};e.splice(l+1,0,n),a((0,v.v0)(e))},children:(0,g.jsx)(D.A,{sx:{color:"#C4C4C4",height:"20px",width:"20px"}})})})]})]}),t&&(M=t.lesson,M?M.map(((e,n)=>(0,g.jsx)(O,{lesson:e,lessonIndex:n,lectureIndex:l,lessonLength:t.lesson.length,lectureId:t.id},n))):[{id:(0,F.u)(),name:"New Lesson",content:"",quiz:[],lessonIndex:0,lectureId:t.id}].map(((e,n)=>(0,g.jsx)(O,{lesson:e,lessonIndex:n,lectureIndex:l,lessonLength:t.lesson.length,lectureId:t.id},n))))]})});var M}const H=function(e){let{editMode:t}=e;const l=(0,p.wA)(),s=(0,u.Zp)(),i=(0,p.d4)(t?v.vz:v.PT),r=(0,p.d4)(v.YR);console.log("course card courseData",i,r);const o=n.useCallback(((e,t)=>{let n=w()(r,{$splice:[[e,1],[t,0,r[e]]]});l((0,v.v0)(n))}),[l,r]);n.useEffect((()=>(r||(i?l((0,v.v0)(i.lectures)):s("/academy/add-course")),()=>!1)),[r,i,l,s]);const c=n.useCallback(((e,t)=>(0,g.jsx)(V,{lecture:e,lectureIndex:t,id:e.id,lectureLength:r.length,moveCard:o},e.id)),[r,o]);return r?(0,g.jsx)(a.A,{elevation:0,sx:{p:2.5,display:"flex",flexDirection:"column",gap:3},children:r.map(((e,t)=>c(e,t)))}):null},N=m.Ik().shape({thumbnail:m.Yj().required("Please select thumbnail"),title:m.Yj().required("Course title is required"),description:m.Yj().required("Description is required"),skills:m.YO().min(0),tags:m.YO().min(0),price:m.ai().required("Please enter price"),summary:m.Yj().required("description is required"),discountPrice:m.ai()});const T=function(){const e=(0,p.wA)(),t=(0,u.Zp)(),l=(0,p.d4)(v.un),m=(0,p.d4)(v.fN),A=(0,p.d4)(v.vz);return n.useEffect((()=>(A||t("/academy/add-course"),()=>!1)),[A,t]),(0,g.jsx)(s.A,{children:(0,g.jsx)(d.l1,{initialValues:{...A},validationSchema:N,onSubmit:t=>{var l;console.log("lecture saved",t),l=t,e((0,v.Ey)(l))},children:(0,g.jsxs)(d.lV,{children:[(0,g.jsxs)(i.Ay,{mb:3,display:"flex",alignItems:"center",justifyContent:"space-between",height:30,children:[(0,g.jsx)(r.A,{variant:"h5",children:"Create A Course"}),(0,g.jsxs)(o.A,{children:[(0,g.jsx)(c.A,{sx:{px:2},children:"Preview"}),(0,g.jsx)(c.A,{sx:{px:2,ml:2},type:"submit",children:"Save"}),(0,g.jsx)(c.A,{sx:{px:2,ml:2},onClick:()=>{const t={...A,isSaved:!0};e((0,v.Ey)(t)),A.isSaved||e((0,v.nj)(t))},children:"Submit for review"})]})]}),(0,g.jsxs)(i.Ay,{container:!0,spacing:3,children:[(0,g.jsxs)(i.Ay,{item:!0,xs:12,md:8,children:[(0,g.jsxs)(a.A,{elevation:0,sx:{p:3.75,display:"flex",flexDirection:"column",gap:2.5},children:[(0,g.jsx)(f,{name:"title",label:"Course title",placeholder:"Course title Name"}),(0,g.jsx)(f,{multiline:!0,rows:4,name:"description",label:"Short description",placeholder:"Description"}),(0,g.jsx)(f,{multiline:!0,rows:8,name:"summary",label:"Summary",placeholder:"What is the course about?"}),(0,g.jsx)(j.A,{name:"skills",options:l,label:"Skills",placeholder:"Enter skill name and press enter"}),(0,g.jsx)(j.A,{name:"tags",options:m,label:"Tags",placeholder:"Enter tag name and press enter"}),(0,g.jsxs)(i.Ay,{container:!0,spacing:3,children:[(0,g.jsx)(i.Ay,{item:!0,xs:12,sm:6,children:(0,g.jsx)(f,{name:"price",label:"Price",placeholder:"Enter price"})}),(0,g.jsx)(i.Ay,{item:!0,xs:12,sm:6,children:(0,g.jsx)(f,{name:"discountPrice",label:"Discount price",placeholder:"Enter discount price"})})]})]}),(0,g.jsx)(r.A,{variant:"h5",my:3,children:"Course Contents"}),(0,g.jsx)(x.Q,{backend:h.t2,children:(0,g.jsx)(H,{editMode:!0})})]}),(0,g.jsx)(i.Ay,{item:!0,xs:12,md:4,children:(0,g.jsx)(C.A,{name:"thumbnail",title:"Upload thumbnail",subtitle:"You can upload maximum 200kb",height:"320px"})})]})]})})})}}}]);
//# sourceMappingURL=237.8a721a23.chunk.js.map