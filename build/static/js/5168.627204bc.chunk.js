"use strict";(self.webpackChunkwinston=self.webpackChunkwinston||[]).push([[5168],{85168:(e,s,n)=>{n.r(s),n.d(s,{default:()=>K});var t=n(65043),i=n(63471),l=n(8070),r=n(68903),a=n(85865),c=n(12110),d=n(88312),o=n(46946),x=n(36591),h=n(43845),j=n(10611),A=n(4598),p=n(53404),u=n(35721),m=n(37918),v=n(48734),g=n(8266),y=n(17392),f=n(63516),C=n(21305),w=n(67537),b=n(80077),k=n(86971),I=n(73033),S=n(33868),E=n(26805),z=n.n(E),R=n(99409),P=n(18584),D=n(74211),F=n(51387),T=n(36910),q=n(29840),L=n(77739),U=n(35964),W=n(42734),Y=n(91894),B=n(83560),M=n(44633),Z=n(81012),H=n(77233),V=n(74605),N=n(51962),O=n(70579);function Q(e){let{lesson:s,lessonIndex:n,lectureIndex:i,lessonLength:l}=e;const c=(0,k.Zp)(),d=(0,b.wA)(),[o,x]=t.useState({lessonIndex:-1,lectureIndex:-1,name:""}),h=(0,b.d4)(S.vz),j=(0,b.d4)(S.YR),A=j[i];return(0,O.jsx)(O.Fragment,{children:(0,O.jsxs)(r.Ay,{display:"flex",alignItems:"center",justifyContent:"space-between",pl:3,children:[(0,O.jsxs)(r.Ay,{display:"flex",alignItems:"center",gap:1,children:[(0,O.jsx)(y.A,{children:(0,O.jsx)(R.A,{sx:{color:"#4C3B9C"}})}),o.lessonIndex==n&&o.lectureIndex===i?(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(q.A,{inputProps:{style:{fontSize:14}},sx:{width:"auto"},variant:"standard",value:o.name,onChange:e=>x({...o,name:e.target.value})})}):(0,O.jsx)(a.A,{variant:"subtitle2",children:s.name}),o.lessonIndex==n&&o.lectureIndex===i?(0,O.jsx)(L.A,{placement:"top",arrow:!0,title:"Update lesson name",children:(0,O.jsx)(y.A,{onClick:()=>{const e={...s,name:o.name},t=[...A.lesson];t[n]=e;const l={...A,lesson:t},r=[...j];r[i]=l,d((0,S.v0)(r)),d((0,S.Ey)({...h,lectures:r})),x({...o,lessonIndex:-1,lectureIndex:-1})},children:(0,O.jsx)(P.A,{sx:{color:"#C4C4C4"}})})}):(0,O.jsx)(L.A,{placement:"top",arrow:!0,title:"Edit lesson name",children:(0,O.jsx)(y.A,{onClick:()=>{x({name:s.name,lectureIndex:i,lessonIndex:n})},children:(0,O.jsx)(D.A,{sx:{color:"#C4C4C4",width:"18px",height:"18px"}})})})]}),(0,O.jsxs)(r.Ay,{display:"flex",alignItems:"center",children:[(0,O.jsx)(L.A,{placement:"top",arrow:!0,title:"Count lesson for course completion",children:(0,O.jsx)(V.A,{control:(0,O.jsx)(N.A,{checked:s.isRequired,sx:{"& .MuiSvgIcon-root":{fontSize:18,color:"#FFD215"}},onChange:e=>{const{checked:t}=e.target,l={...s,isRequired:t},r=[...A.lesson];r[n]=l;const a={...A,lesson:r},c=[...j];c[i]=a,d((0,S.v0)(c)),d((0,S.Ey)({...h,lectures:c}))}}),label:"Required"})}),(0,O.jsx)(L.A,{placement:"top",arrow:!0,title:"Edit lesson",children:(0,O.jsx)(y.A,{onClick:()=>{c("/academy/edit-lesson"),d((0,S.Pq)(s))},children:(0,O.jsx)(B.A,{sx:{color:"#C4C4C4",width:"18px",height:"18px"}})})}),(0,O.jsx)(L.A,{placement:"top",arrow:!0,title:"Copy lesson",children:(0,O.jsx)(y.A,{onClick:()=>{const e={...s,id:(0,Y.u)(),name:"Copy of "+s.name},t=[...A.lesson];t.splice(n+1,0,e);const l={...A,lesson:t},r=[...j];r[i]=l,d((0,S.v0)(r)),d((0,S.Ey)({...h,lectures:r}))},children:(0,O.jsx)(T.A,{sx:{color:"#C4C4C4",width:"18px",height:"18px"}})})}),(0,O.jsx)(L.A,{placement:"top",arrow:!0,title:"Lesson link",children:(0,O.jsx)(y.A,{children:(0,O.jsx)(M.A,{sx:{color:"#C4C4C4",width:"18px",height:"18px"}})})}),l>1?(0,O.jsx)(L.A,{placement:"top",arrow:!0,title:"Delete lesson",children:(0,O.jsx)(y.A,{onClick:()=>{const e=[...A.lesson];e.splice(n,1);const s={...A,lesson:e},t=[...j];t[i]=s,d((0,S.v0)(t)),d((0,S.Ey)({...h,lectures:t}))},children:(0,O.jsx)(F.A,{sx:{color:"#C4C4C4",width:"18px",height:"18px"}})})}):null,(0,O.jsx)(L.A,{placement:"top",arrow:!0,title:"Add lesson below",children:(0,O.jsx)(y.A,{onClick:()=>{const e={id:(0,Y.u)(),name:"Untitled lesson",isRequired:!1,content:[]},s=[...A.lesson];s.splice(n+1,0,e);const t={...A,lesson:s},l=[...j];l[i]=t,d((0,S.v0)(l)),d((0,S.Ey)({...h,lectures:l}))},children:(0,O.jsx)(Z.A,{sx:{color:"#C4C4C4",width:"18px",height:"18px"}})})}),(0,O.jsx)(L.A,{placement:"top",arrow:!0,title:"Add lecture below",children:(0,O.jsx)(y.A,{onClick:()=>{const e=[...j],s={...A,id:(0,Y.u)(),name:"Untitled lecture",lesson:[{id:(0,Y.u)(),name:"Untitled lesson",isRequired:!1,content:[]}]};e.splice(i+1,0,s),d((0,S.v0)(e)),d((0,S.Ey)({...h,lectures:e}))},children:(0,O.jsx)(H.A,{sx:{color:"#C4C4C4",width:"18px",height:"18px"}})})})]})]},s.name+n)})}function $(e){let{lecture:s,lectureIndex:n,lectureLength:i,moveCard:l,id:c}=e;const d=(0,b.wA)(),o=(0,b.d4)(S.YR),x=(0,b.d4)(S.vz),[h,j]=t.useState({id:-1,name:""}),A=t.useRef(null),[{handlerId:p},u]=(0,U.H)({accept:"card",collect:e=>({handlerId:e.getHandlerId()}),hover(e,s){var t;if(!A.current)return;const i=e.lectureIndex,r=n;if(i===r)return;const a=null===(t=A.current)||void 0===t?void 0:t.getBoundingClientRect(),c=(a.bottom-a.top)/2,d=s.getClientOffset().y-a.top;i<r&&d<c||i>r&&d>c||(l(i,r),e.lectureIndex=r)}}),[{isDragging:m},v,g]=(0,W.i)({type:"card",item:()=>({id:c,lectureIndex:n}),collect:e=>({isDragging:e.isDragging()})}),f=m?"0":"1";g(u(A));return(0,O.jsx)("div",{ref:A,style:{opacity:f},"data-handler-id":p,children:(0,O.jsxs)(r.Ay,{display:"flex",flexDirection:"column",gap:1,children:[(0,O.jsxs)(r.Ay,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,O.jsxs)(r.Ay,{display:"flex",alignItems:"center",gap:1,children:[(0,O.jsx)(y.A,{ref:v,sx:{cursor:"move"},children:(0,O.jsx)(R.A,{sx:{color:"#4C3B9C"}})}),h.id===c?(0,O.jsx)(q.A,{inputProps:{style:{fontSize:16}},sx:{width:"auto"},variant:"standard",value:h.name,onChange:e=>{j({...h,name:e.target.value})}}):(0,O.jsx)(a.A,{variant:"subtitle1",children:s.name}),h.id===c?(0,O.jsx)(L.A,{placement:"top",arrow:!0,title:"Update lecture name",children:(0,O.jsx)(y.A,{onClick:()=>{let e=[...o];const s={...e.find((e=>e.id===c)),name:h.name};e=e.map((e=>e.id===c?s:e)),d((0,S.v0)(e)),d((0,S.Ey)({...x,lectures:e})),j({id:-1,name:""})},children:(0,O.jsx)(P.A,{sx:{color:"#C4C4C4"}})})}):(0,O.jsx)(L.A,{placement:"top",arrow:!0,title:"Edit lecture name",children:(0,O.jsx)(y.A,{onClick:()=>{j({...s,id:s.id,name:s.name})},children:(0,O.jsx)(D.A,{sx:{color:"#C4C4C4",height:"20px",width:"20px"}})})})]}),(0,O.jsxs)(r.Ay,{children:[i>1?(0,O.jsx)(L.A,{placement:"top",arrow:!0,title:"Delete lecture",children:(0,O.jsx)(y.A,{onClick:()=>{console.log("delete lecture",s);const e=[...o].filter((e=>e.id!==s.id));console.log("lecturesUpdated",e),d((0,S.v0)(e)),d((0,S.Ey)({...x,lectures:e}))},children:(0,O.jsx)(F.A,{sx:{color:"#C4C4C4",height:"20px",width:"20px"}})})}):null,(0,O.jsx)(L.A,{placement:"top",arrow:!0,title:"Copy lecture",children:(0,O.jsx)(y.A,{onClick:()=>{const e=[...o],t={...s,id:(0,Y.u)()};e.splice(n+1,0,t),d((0,S.v0)(e)),d((0,S.Ey)({...x,lectures:e}))},children:(0,O.jsx)(T.A,{sx:{color:"#C4C4C4",height:"20px",width:"20px"}})})})]})]}),s&&(C=s.lesson,null===C||void 0===C?void 0:C.map(((e,t)=>(0,O.jsx)(Q,{lesson:e,lessonIndex:t,lectureIndex:n,lessonLength:s.lesson.length,lectureId:s.id},t))))]})});var C}const G=function(e){let{editMode:s}=e;const n=(0,b.wA)(),i=(0,k.Zp)(),l=(0,b.d4)(s?S.vz:S.PT),r=(0,b.d4)(S.YR),a=t.useCallback(((e,s)=>{let t=z()(r,{$splice:[[e,1],[s,0,r[e]]]});n((0,S.v0)(t)),n((0,S.Ey)({...l,lectures:t}))}),[n,r,l]);t.useEffect((()=>(r||(l?n((0,S.v0)(l.lectures)):i("/academy/add-course")),()=>!1)),[r,l,n,i]);const d=t.useCallback(((e,s)=>(0,O.jsx)($,{lecture:e,lectureIndex:s,id:e.id,lectureLength:r.length,moveCard:a},e.id)),[r,a]);return r?(0,O.jsx)(c.A,{elevation:0,sx:{p:2.5,display:"flex",flexDirection:"column",gap:3},children:r.map(((e,s)=>d(e,s)))}):null},J=I.Ik().shape({});const K=function(){var e,s,n;const I=(0,b.wA)(),E=(0,k.Zp)(),z=(0,b.d4)(S.vz),R=(0,b.d4)(S.YR);return t.useEffect((()=>(null===z&&E("/academy/add-course"),()=>!1)),[z,E]),null===z?(0,O.jsx)(l.A,{children:(0,O.jsxs)(r.Ay,{container:!0,spacing:2,children:[(0,O.jsxs)(r.Ay,{item:!0,xs:12,md:8,children:[(0,O.jsx)(a.A,{variant:"h4",children:"Winston Academy Course Editor"}),(0,O.jsx)(a.A,{variant:"h5",mb:2,children:"This is the course editor for Winston Academy."}),(0,O.jsx)(c.A,{children:(0,O.jsx)(d.A,{variant:"rectangular",width:"100%",height:200})}),(0,O.jsx)(a.A,{variant:"body1",mt:2,children:"This is the course editor for Winston Academy. It is a work in progress."})]}),(0,O.jsxs)(r.Ay,{item:!0,xs:12,md:4,children:[(0,O.jsxs)(o.A,{display:"flex",justifyContent:"space-between",mt:2,children:[(0,O.jsx)(a.A,{variant:"h5",children:"Learn to Earn"}),(0,O.jsx)(a.A,{variant:"h5",children:"admin@winston.ser"})]}),(0,O.jsxs)(o.A,{display:"flex",justifyContent:"space-between",flexDirection:"column",mt:2,children:[(0,O.jsxs)(a.A,{variant:"h5",children:["Price:"," ",(0,O.jsx)("span",{style:{float:"right"},children:(0,O.jsx)(d.A,{variant:"text",sx:{fontSize:"1rem"}})})]}),(0,O.jsxs)(a.A,{variant:"h5",children:["Discount Price:"," ",(0,O.jsx)("span",{style:{float:"right"},children:(0,O.jsx)(d.A,{variant:"text",sx:{fontSize:"1rem"}})})]}),(0,O.jsxs)(a.A,{variant:"h5",children:["Tags:"," ",(0,O.jsx)("span",{style:{float:"right"},children:(0,O.jsx)(d.A,{variant:"text",sx:{fontSize:"1rem"}})})]}),(0,O.jsxs)(a.A,{variant:"h5",children:["Skills:"," ",(0,O.jsx)("span",{style:{float:"right"},children:(0,O.jsx)(d.A,{variant:"text",sx:{fontSize:"1rem"}})})]}),(0,O.jsxs)(a.A,{variant:"h5",children:["Progress:"," ",(0,O.jsx)(o.A,{width:"100%",height:10,mt:1,children:(0,O.jsx)(d.A,{variant:"rectangular",width:"100%",height:10})})]}),(0,O.jsxs)(a.A,{variant:"h5",children:["Template:"," ",(0,O.jsx)("span",{style:{float:"right"},children:(0,O.jsx)(d.A,{variant:"text",sx:{fontSize:"1rem"}})})]}),(0,O.jsxs)(a.A,{variant:"h5",children:["Submitted:"," ",(0,O.jsx)("span",{style:{float:"right"},children:(0,O.jsx)(d.A,{variant:"text",sx:{fontSize:"1rem"}})})]}),(0,O.jsxs)(a.A,{variant:"h5",children:["Reviewed:"," ",(0,O.jsx)("span",{style:{float:"right"},children:(0,O.jsx)(d.A,{variant:"text",sx:{fontSize:"1rem"}})})]}),(0,O.jsxs)(a.A,{variant:"h5",children:["Approved:"," ",(0,O.jsx)("span",{style:{float:"right"},children:(0,O.jsx)(d.A,{variant:"text",sx:{fontSize:"1rem"}})})]}),(0,O.jsxs)(a.A,{variant:"h5",children:["Published:"," ",(0,O.jsx)("span",{style:{float:"right"},children:(0,O.jsx)(d.A,{variant:"text",sx:{fontSize:"1rem"}})})]}),(0,O.jsxs)(a.A,{variant:"h5",children:["Rejected:"," ",(0,O.jsx)("span",{style:{float:"right"},children:(0,O.jsx)(d.A,{variant:"text",sx:{fontSize:"1rem"}})})]}),(0,O.jsxs)(a.A,{variant:"h5",children:["Saved:"," ",(0,O.jsx)("span",{style:{float:"right"},children:(0,O.jsx)(d.A,{variant:"text",sx:{fontSize:"1rem"}})})]})]})]})]})}):(0,O.jsxs)(l.A,{children:[(0,O.jsxs)(r.Ay,{container:!0,spacing:2,children:[(0,O.jsxs)(r.Ay,{item:!0,xs:12,md:8,children:[(0,O.jsx)(a.A,{variant:"h4",children:z.title}),(0,O.jsx)(a.A,{variant:"h5",mb:2,children:z.description}),(0,O.jsx)(c.A,{children:(0,O.jsx)(x.A,{component:"img",image:z.thumbnail,alt:z.title})}),(0,O.jsx)(a.A,{variant:"body1",mt:2,children:z.summary})]}),(0,O.jsxs)(r.Ay,{item:!0,xs:12,md:4,children:[(0,O.jsxs)(o.A,{display:"flex",justifyContent:"space-between",mt:2,children:[(0,O.jsx)(a.A,{variant:"h5",children:null===z||void 0===z||null===(e=z.teacher)||void 0===e?void 0:e.name}),(0,O.jsx)(a.A,{variant:"h5",children:null===z||void 0===z||null===(s=z.teacher)||void 0===s?void 0:s.email})]}),(0,O.jsxs)(o.A,{display:"flex",justifyContent:"space-between",flexDirection:"column",mt:2,children:[(0,O.jsxs)(a.A,{variant:"h5",children:["Price:"," ",(0,O.jsx)("span",{style:{float:"right"},children:z.price>0?(0,O.jsxs)(O.Fragment,{children:[z.currencySymbol,(0,O.jsx)("span",{style:{fontWeight:"bold",color:"lightgreen"},children:z.price})]}):(0,O.jsx)(O.Fragment,{children:"FREE"})})]}),(0,O.jsxs)(a.A,{variant:"h5",children:["Discount Price:"," ",z.discountPrice>0?(0,O.jsxs)("span",{style:{float:"right"},children:[z.currencySymbol,(0,O.jsx)("span",{style:{fontWeight:"bold",color:"red"},children:z.discountPrice})]}):(0,O.jsx)("span",{style:{float:"right"},children:"None"})]}),(0,O.jsxs)(a.A,{variant:"h5",children:["Tags:"," ",(0,O.jsx)("span",{style:{float:"right"},children:z.tags.map((e=>(0,O.jsx)(h.A,{label:e},e)))})]}),(0,O.jsxs)(a.A,{variant:"h5",children:["Skills:"," ",(0,O.jsx)("span",{style:{float:"right"},children:z.skills.map((e=>(0,O.jsx)(h.A,{label:e},e)))})]}),(0,O.jsxs)(a.A,{variant:"h5",children:["Progress:"," ",(0,O.jsx)(o.A,{width:"100%",height:10,mt:1,children:(0,O.jsx)(j.A,{variant:"determinate",value:z.progress+1,color:"info"})})]}),(0,O.jsxs)(a.A,{variant:"h5",children:["Template:"," ",(0,O.jsx)("span",{style:{float:"right"},children:(0,O.jsx)(A.A,{checked:z.isTemplate})})]}),(0,O.jsxs)(a.A,{variant:"h5",children:["Submitted:"," ",(0,O.jsx)("span",{style:{float:"right"},children:(0,O.jsx)(A.A,{checked:z.isSubmitted})})]}),(0,O.jsxs)(a.A,{variant:"h5",children:["Reviewed:"," ",(0,O.jsx)("span",{style:{float:"right"},children:(0,O.jsx)(A.A,{checked:z.isReviewed})})]}),(0,O.jsxs)(a.A,{variant:"h5",children:["Approved:"," ",(0,O.jsx)("span",{style:{float:"right"},children:(0,O.jsx)(A.A,{checked:z.isApproved})})]}),(0,O.jsxs)(a.A,{variant:"h5",children:["Published:"," ",(0,O.jsx)("span",{style:{float:"right"},children:(0,O.jsx)(A.A,{checked:z.isPublished})})]}),(0,O.jsxs)(a.A,{variant:"h5",children:["Rejected:"," ",(0,O.jsx)("span",{style:{float:"right"},children:(0,O.jsx)(A.A,{checked:z.isRejected})})]}),(0,O.jsxs)(a.A,{variant:"h5",children:["Saved:"," ",(0,O.jsx)("span",{style:{float:"right"},children:(0,O.jsx)(A.A,{checked:z.isSaved})})]})]})]})]}),(0,O.jsx)(f.l1,{initialValues:{...z},validationSchema:J,onSubmit:e=>{console.log("lectures",R),console.log("courseData",z),console.log("values",e),I((0,S.Ey)({...z,lectures:R}))},children:(0,O.jsxs)(f.lV,{children:[(0,O.jsx)(r.Ay,{mb:3,display:"flex",alignItems:"center",justifyContent:"space-between",height:30,children:(0,O.jsx)(a.A,{variant:"h5",children:"Course Contents"})}),(0,O.jsxs)(r.Ay,{container:!0,spacing:3,children:[(0,O.jsx)(r.Ay,{item:!0,xs:12,md:8,children:(0,O.jsx)(C.Q,{backend:w.t2,children:(0,O.jsx)(G,{editMode:!0})})}),(0,O.jsxs)(r.Ay,{item:!0,xs:12,md:4,children:[(0,O.jsx)(o.A,{display:"flex",justifyContent:"space-between",mt:2,children:(0,O.jsx)(p.A,{sx:{px:2,ml:2},type:"submit",fullWidth:!0,children:"Save"})}),(0,O.jsxs)(o.A,{display:"flex",justifyContent:"space-between",mt:2,children:[(0,O.jsx)(a.A,{variant:"h5",children:"Course Index"}),(0,O.jsx)(u.A,{children:null===z||void 0===z||null===(n=z.lectures)||void 0===n?void 0:n.map((e=>{var s;return(0,O.jsxs)(t.Fragment,{children:[(0,O.jsxs)(m.Ay,{children:[(0,O.jsx)(v.A,{primary:e.name}),(0,O.jsx)(g.A,{children:(0,O.jsx)(y.A,{edge:"end","aria-label":"delete",children:(0,O.jsx)(i.A,{})})})]}),(0,O.jsx)(u.A,{component:"div",disablePadding:!0,children:null===e||void 0===e||null===(s=e.lesson)||void 0===s?void 0:s.map((e=>(0,O.jsxs)(m.Ay,{sx:{pl:4},children:[(0,O.jsx)(v.A,{primary:e.name}),(0,O.jsx)(g.A,{children:(0,O.jsx)(y.A,{edge:"end","aria-label":"delete",children:(0,O.jsx)(i.A,{})})})]},e.id)))})]},e.id)}))})]})]})]})]})})]})}}}]);
//# sourceMappingURL=5168.627204bc.chunk.js.map